{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fleet Track</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>

<body>
    <div class="login-container">
        <div class="login-box">
            <div class="login-header">
                <img src="{% static 'image/fleetTrackLogo.png' %}" alt="FleetTrack Logo" class="logo">
                <h1>Crie a sua conta</h1>
                <p>Fleet Management System</p>
            </div>

            <form method="post" novalidate>
                {% csrf_token %}

                {% if form.non_field_errors %}
                <div class="form-errors" style="color: red; margin-bottom: 1rem;">
                    {% for error in form.non_field_errors %}
                    <p>{{ error }}</p>
                    {% endfor %}
                </div>
                {% endif %}

                <div class="form-group">
                    <label for="{{ form.company_name.id_for_label }}">Nome da Empresa</label>
                    {{ form.company_name }}
                    {{ form.company_name.errors }}
                </div>

                <div class="form-group">
                    <label for="{{ form.cnpj.id_for_label }}">CNPJ</label>
                    {{ form.cnpj }}
                    {{ form.cnpj.errors }}
                </div>

                <div class="form-group">
                    <label for="{{ form.first_name.id_for_label }}">Nome Completo</label>
                    {{ form.first_name }}
                    {{ form.first_name.errors }}
                </div>

                <div class="form-group">
                    <label for="{{ form.username.id_for_label }}">Endereço de Email</label>
                    {{ form.username }}
                    {{ form.username.errors }}
                </div>

                <div class="form-group">
                    <label for="{{ form.password.id_for_label }}">Senha</label>
                    {{ form.password }}
                    {{ form.password.errors }}
                </div>

                <div class="form-group">
                    <label for="{{ form.confirm_password.id_for_label }}">Confirmar Senha</label>
                    {{ form.confirm_password }}
                    {{ form.confirm_password.errors }}
                </div>

                <button type="submit" class="btn-signin">Criar Conta</button>
            </form>

            <div class="divider">
            </div>

            <div class="signup-link">
                <p>Já tem conta? <a href="{% url 'login' %}">conecte-se</a></p>
            </div>
        </div>
    </div>

    <script>
        document.getElementById('id_company_name').placeholder = 'Insira o nome da sua empresa';
        document.getElementById('id_cnpj').placeholder = 'XX.XXX.XXX/0001-XX';
        document.getElementById('id_first_name').placeholder = 'Insira seu nome completo';
        document.getElementById('id_username').placeholder = 'Insira seu email';
        document.getElementById('id_password').placeholder = 'Crie uma senha';
        document.getElementById('id_confirm_password').placeholder = 'Confirme sua senha';

        const cnpjInput = document.getElementById('id_cnpj');
        if (cnpjInput) {
            cnpjInput.addEventListener('input', function (e) {
                let v = e.target.value.replace(/\D/g, '');
                
                if (v.length > 14) {
                    v = v.substring(0, 14);
                }

                if (v.length > 12) {
                    v = v.replace(/^(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})$/, '$1.$2.$3/$4-$5');
                } else if (v.length > 8) {
                    v = v.replace(/^(\d{2})(\d{3})(\d{3})(\d{1,4})$/, '$1.$2.$3/$4');
                } else if (v.length > 5) {
                    v = v.replace(/^(\d{2})(\d{3})(\d{1,3})$/, '$1.$2.$3');
                } else if (v.length > 2) {
                    v = v.replace(/^(\d{2})(\d{1,3})$/, '$1.$2');
                }
                
                e.target.value = v;
            });
        }
    </script>
</body>

</html>